<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Credential Lifecycle &#8212; The Italian EUDI Wallet implementation profile version: latest documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=9b2032db" />
    <script src="_static/documentation_options.js?v=edb75691"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pseudonyms" href="pseudonyms.html" />
    <link rel="prev" title="Entity Configuration of Relying Parties" href="relying-party-entity-configuration.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage"><img src="https://avatars.githubusercontent.com/u/15377824?s=48&v=4"/></a></h1>
            <a id="source_link" href="https://github.com/italia/eudi-wallet-it-docs">
    
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path fill="white" d="M503.5 204.6L502.8 202.8L433.1 21.02C431.7 17.45 429.2 14.43 425.9 12.38C423.5 10.83 420.8 9.865 417.9 9.57C415 9.275 412.2 9.653 409.5 10.68C406.8 11.7 404.4 13.34 402.4 15.46C400.5 17.58 399.1 20.13 398.3 22.9L351.3 166.9H160.8L113.7 22.9C112.9 20.13 111.5 17.59 109.6 15.47C107.6 13.35 105.2 11.72 102.5 10.7C99.86 9.675 96.98 9.295 94.12 9.587C91.26 9.878 88.51 10.83 86.08 12.38C82.84 14.43 80.33 17.45 78.92 21.02L9.267 202.8L8.543 204.6C-1.484 230.8-2.72 259.6 5.023 286.6C12.77 313.5 29.07 337.3 51.47 354.2L51.74 354.4L52.33 354.8L158.3 434.3L210.9 474L242.9 498.2C246.6 500.1 251.2 502.5 255.9 502.5C260.6 502.5 265.2 500.1 268.9 498.2L300.9 474L353.5 434.3L460.2 354.4L460.5 354.1C482.9 337.2 499.2 313.5 506.1 286.6C514.7 259.6 513.5 230.8 503.5 204.6z"/>
        </svg>
    
</a>
        

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ssi-introduction.html">The Digital Identity Wallet Paradigm</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html">Normative Language and Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms.html#defined-terms">Defined Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">The Infrastructure of Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallet-solution.html">Wallet Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallet-attestation.html">Wallet Attestation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-data-model.html">PID/(Q)EAA Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-issuance.html">PID/(Q)EAA Issuance</a></li>
<li class="toctree-l1"><a class="reference internal" href="pid-eaa-entity-configuration.html">Entity Configuration of PID/(Q)EAA Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentic-sources.html">Authentic Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="relying-party-solution.html">Relying Party Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="relying-party-entity-configuration.html">Entity Configuration of Relying Parties</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Credential Lifecycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="pseudonyms.html">Pseudonyms</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup-restore.html">backup-restore.rst</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Cryptographic Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="standards.html">Technical References</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="credential-lifecycle">
<span id="sec-revocation-intro"></span><h1>Credential Lifecycle<a class="headerlink" href="#credential-lifecycle" title="Link to this heading">¶</a></h1>
<p>The value of a Digital Credential is conditional on its validity. A Credential that has been revoked, due to legal requirements, inaccuracy or compromise, is valueless and potentially harmful.
For these reasons a robust mechanism for managing the life-cycle and the revocation of a Digital Credential is required.</p>
<p>This section outlines the key technical requirements and processes related to the revocation of Digital Credentials.
Furthermore, it provides the technical details that the Verifiers MUST implement to verify, in a secure and reliable manner, the validity of a Digital Credential during the presentation phase.</p>
<p>The verification of the validity of a Digital Credential is based on the <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p>
<p>A Status Assertion is a signed document serving as proof of a Digital Credential's current validity status. The Credential Issuer provides these assertions to Holders who can present them to Verifiers together with the corresponding Digital Credentials.</p>
<p>The Status Assertions have the following features:</p>
<ul class="simple">
<li><p>automated issuance, as the User authentication is not required for the provisioning of the Status Assertion;</p></li>
<li><p>verification of the Digital Credential validity status in both online and offline scenarios;</p></li>
<li><p>privacy-preserving, according to the following evidences:</p>
<ol class="arabic simple">
<li><p>the Verifier can check the validity of the Credential during the presentation phase. It is not able to check the validity of a given Digital Credential related to the User over time and out of the scope of the User authentication;</p></li>
<li><p>the Credential Issuers is not able to know to which Verifier the Digital Credential or the Status Assertion will be presented;</p></li>
<li><p>it doesn't reveal any information about the Users or the content of their Digital Credentials.</p></li>
</ol>
</li>
</ul>
<section id="operational-requirements">
<span id="sec-revocation-assumption"></span><h2>Operational Requirements<a class="headerlink" href="#operational-requirements" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Internet Connection for Status Assertions</strong>: Status Assertions can be obtained only when the Wallet Instance is connected to the internet and actively operated by the User.</p></li>
<li><p><strong>Role of a Credential Issuer</strong>: A Credential Issuer is responsible for creating and issuing Credentials, as well as managing their lifecycle and validity status.</p></li>
<li><p><strong>Involvement of Authentic Sources</strong>: When one or more Authentic Sources are involved in the issuance of a Digital Credential, the information exchanged between the Authentic Source and the Credential Issuer is crucial for the Digital Credential's issuance. Furthermore, in cases where the Authentic Source initiates a revocation or data changes, revoking the Digital Credential becomes necessary.</p></li>
</ul>
</section>
<section id="functional-requirements">
<span id="sec-revocation-requirements"></span><h2>Functional Requirements<a class="headerlink" href="#functional-requirements" title="Link to this heading">¶</a></h2>
<p>In addition to the requirements in Section 5 of <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>, <strong>The Status Assertion:</strong></p>
<ul class="simple">
<li><p>MUST have a validity period not greater than 24 hours;</p></li>
<li><p>MUST NOT reveal any information about the Relying Party, the User's device or the User's data contained in the Digital Credential the assertion is related to;</p></li>
<li><p>MUST be non-repudiable even beyond its expiration time and even in the case of cryptographic keys rotation.</p></li>
</ul>
<p><strong>The Credential Issuer MUST:</strong></p>
<ul class="simple">
<li><p>ensure that the data contained in a Digital Credential is kept up to date, including the status of validity of the data from the Authentic Source;</p></li>
<li><p>revoke a Digital Credential when the following circumstances occur:</p>
<ul>
<li><p>the Digital Credential requires to be updated, whenever one or more attributes are changed; in this case the User will request a new issuance for that Digital Credential;</p></li>
<li><p>the Holder needs to address the loss or compromise of cryptographic key material associated with the issued Digital Credential. In such case, the End-User should request the revocation of the Digital Credential through a service provided by the Credential Issuer and using an authentication method that offers the same Level of Assurance obtained during the Credential Issuance;</p></li>
<li><p>the User deletes the Digital Credential from the Wallet Instance. The Wallet Instance therefore should request the revocation of such Digital Credential to the Credential Issuer;</p></li>
</ul>
</li>
<li><p>provide a web service for allowing a Wallet Instance, with a proof of possession of a specific Digital Credential, to</p>
<ul>
<li><p>request a revocation of that Digital Credential;</p></li>
<li><p>obtain a related Status Assertion;</p></li>
</ul>
</li>
<li><p>provide out-of-band mechanisms through which the User can request the revocation of their Digital Credentials, using a robust procedure for identity proofing and User authentication, in particular when the User is unable to use the personal Wallet Instance.</p></li>
</ul>
<p><strong>The Wallet Instance MUST:</strong></p>
<ul class="simple">
<li><p>check periodically the validity status of the Digital Credential that is stored in it, requesting a Status Assertion for each Digital Credential;</p></li>
<li><p>be able to present a Status Assertion if required by a Verifier, along with the corresponding Digital Credential;</p></li>
<li><p>request a revocation of a Digital Credential when the Users delete it from the storage.</p></li>
</ul>
<p><strong>The Authentic Sources MUST:</strong></p>
<ul class="simple">
<li><p>provide web services for the providing of updated User data and the validity status;</p></li>
<li><p>store in local databases only the minimum information required to provide the Credential Issuer with the User data or a change in the validity status.</p></li>
</ul>
</section>
<section id="revocation-use-cases">
<h2>Revocation Use Cases<a class="headerlink" href="#revocation-use-cases" title="Link to this heading">¶</a></h2>
<p>The revocation of a Digital Credential MAY be triggered by:</p>
<ul class="simple">
<li><p>Users using their personal Wallet Instance or by some out-of-band touchpoints.</p></li>
<li><p>Revocation of the Wallet Instance.</p></li>
<li><p>Authentic Sources (e.g., for attribute updates) following administrative purposes.</p></li>
<li><p>Law-Enforcing Bodies for the fulfillment of their functions and any other judicial reasons (e.g., Police).</p></li>
</ul>
<p>Credential Revocation Flows can start under different scenarios, such as:</p>
<blockquote>
<div><ul class="simple">
<li><p>The User reports the loss or theft of their own physical document to the Law-Enforcement Authorities: this implies that the Credentials, if any, shall be revoked.</p></li>
<li><p>The User notifies an Authentic Source that one or more attributes are changed (e.g. the current resident address): in this case the Credentials MUST be revoked, as they are no longer valid due to the change in attributes.</p></li>
<li><p>Users who lose access to their Wallet Instance (e.g., due to theft or loss of the device) can request the Credential Issuer to revoke their Credentials or ask the Wallet Provider to revoke the Wallet Instance. If the Wallet Provider is authorized by the User and is aware of the types of Credentials and their issuers stored in the Wallet, it can then initiate the revocation of all Digital Credentials contained within the Wallet Instance on behalf of the User.</p></li>
<li><p>The Law-Enforcing Authorities, for the fulfillment of their functions and any other judicial reasons, may request the Authentic Source to revoke entitlements, licenses, certificates, identification documents, etc., which in turn leads to the revocation of any linked Credentials.</p></li>
<li><p>The Authentic Sources that for any update of one or more User attributes, SHOULD inform the Credential Issuer that has previously requested those data for the issuance of a Credential about that User.</p></li>
<li><p>The Credential Issuers, for technical security reasons (e.g. in the case of compromised cryptographic keys), SHOULD decide to revoke the Credentials.</p></li>
</ul>
</div></blockquote>
<p>The revocation scenarios involve two main flows:</p>
<blockquote>
<div><ul class="simple">
<li><p>The <strong>Revocation flows</strong>: these flows describe how an Entity requests for a Digital Credential revocation.</p></li>
<li><p>The <strong>Status Assertion flows</strong>: these flows define the technical protocols for requesting and obtaining a Status Assertion and how the Wallet Instance SHOULD provide it to a Verifier as a proof of validity of a corresponding Digital Credential.</p></li>
</ul>
</div></blockquote>
</section>
<section id="revocation-flows">
<span id="sec-revocation-high-level-flow"></span><h2>Revocation Flows<a class="headerlink" href="#revocation-flows" title="Link to this heading">¶</a></h2>
<p>Depending on the different scenarios that may involve the revocation of a Digital Credential, different processes and technical flows may be implemented, according to national laws or Regulations of specific domains.
The subsequent sections define the protocol interface between the Wallet Instances and the Credential Issuers during the revocation request. The communication between the Credential Issuers and other Entities is out-of-scope of this technical implementation profile.</p>
<section id="revocation-request-by-wallet-instance">
<span id="sec-revocation-wi-initiated-flow"></span><h3>Revocation Request by Wallet Instance<a class="headerlink" href="#revocation-request-by-wallet-instance" title="Link to this heading">¶</a></h3>
<p>A Wallet Instance MUST request the revocation of a Digital Credential as defined below.</p>
<figure class="align-center" id="id3" style="width: 100%">
<span id="fig-low-level-flow-revocation"></span><a class="reference external image-reference" href="https://www.plantuml.com/plantuml/svg/LOz1IyKm383l_HNXuK4FubrG7dXwNbxHuIw2n2rYM9VK9dL_tpBHCUYb-RwFaACv5gzp2bXTfSxlL49k8nuuepWSUao974xIJ1de06YmyDuvcLKgA-8G5eRhU-1RYEVd3cuAVUj4KEYhaldbK6WaSSRqbZNVNJpy_wF6nxwx2k6lVy748pg1Vn9itgl4ele1xKKr8pDMsQgdtttxPiMDBwjWMSK8pbCuaepj-Xy0"><img alt="_images/Low-Level-Flow-Revocation.svg" src="_images/Low-Level-Flow-Revocation.svg" /></a>
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Wallet Instance Initiated Revocation Flow</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Step 1 (Credential Revocation Request)</strong>: The Wallet Instance initiates the process by creating a Credential Revocation Request. This request MUST be sent to the Credential Issuer who has previously issued that Credential. The Credential Revocation Request MUST contain a JSON object with the member <cite>revocation_requests</cite>.</p>
<p>The <cite>revocation_requests</cite> MUST be set with an array of strings, where each string within the array represents a Credential Revocation Request object, enabling the Wallet Instance to request multiple Credential Revocation Requests to a single Credential Issuer.</p>
<p>The request MUST be signed with the private key related to the public key contained within the Credential (such as the Credential Issuer Signed JWT in the case of SD-JWT, or the MSO in the case of Mdoc CBOR). Then, the Wallet Instance sends the request to the Credential Issuer as in the following non-normative example representing a Revocation Assertion Request array.</p>
<div class="highlight-default notranslate" id="credential-revocation-request-ex"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">revoke</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Host</span><span class="p">:</span> <span class="n">pid</span><span class="o">-</span><span class="n">provider</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>

<span class="n">revocation_requests</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;${base64url(json({typ: (some pop for revocation-assertion)+jwt, ...}))}.payload.signature&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">]</span>
</pre></div>
</div>
<p>Below, is given a non-normative example of a single Revocation Assertion Request object with decoded JWT headers and payload and without signature for better readability:</p>
<div class="highlight-default notranslate" id="credential-pop-jwt-ex"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;ES256&quot;,
  &quot;typ&quot;: &quot;credential-revocation-request+jwt&quot;,
  &quot;kid&quot;: $CREDENTIAL-CNF-JWKID
}
.
{
  &quot;iss&quot;: &quot;0b434530-e151-4c40-98b7-74c75a5ef760&quot;,
  &quot;aud&quot;: &quot;https://pid-provider.example.org&quot;,
  &quot;iat&quot;: 1698744039,
  &quot;exp&quot;: 1698744139,
  &quot;jti&quot;: &quot;6f204f7e-e453-4dfd-814e-9d155319408c&quot;,
  &quot;credential_hash&quot;: $Issuer-Signed-JWT-Hash,
  &quot;credential_hash_alg&quot;: &quot;sha-256&quot;
}
</pre></div>
</div>
<p><strong>Step 2 (PoP verification)</strong>: The Credential Issuer verifies the proof of possession of the Credential requested to be revoked, using the the confirmation method that was attested in the Credential. If the verification is successful the revocation request is allowed.</p>
<p><strong>Step 3 (Credential Revocation)</strong>: The Credential Issuer revokes the Credential provided in the Revocation Request object. After the revocation, the Credential Issuer MAY also send a notification to the User (e.g. using a User's email address, telephone number, or any other verified and secure communication channel), with all needed information related to the Credential revocation status update. This communication is out of scope of the current technical implementation profile.</p>
<p><strong>Step 4 (Credential Revocation Response)</strong>: The Credential Issuer sends a response back to the Wallet Instance with the result of the revocation request.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">http</span>
            <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="n">Ok</span>
            <span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>

            <span class="p">{</span>
                    <span class="s2">&quot;revocation_assertion_responses&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;${base64url(json({typ: revocation_assertion+jwt, ...}))}.payload.signature&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">]</span>
            <span class="p">}</span>
</pre></div>
</div>
<section id="credential-revocation-http-request">
<h4>Credential Revocation HTTP Request<a class="headerlink" href="#credential-revocation-http-request" title="Link to this heading">¶</a></h4>
<p>The requests to the <em>Credential Issuer Revocation endpoint</em> MUST be HTTP with method POST, using the mandatory parameters listed below within the HTTP request message body. These MUST be encoded in <code class="docutils literal notranslate"><span class="pre">application/json</span></code> format.</p>
<table class="docutils align-default" id="table-revocation-request-params">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>revocation_requests</strong></p></td>
<td><p>It MUST be an array of strings, where each represents a Revocation Assertion Request object. Each element MUST contain a signed JWT as a cryptographic proof of possession to which the Digital Credential to be revoked shall be bound. See Section <a class="reference internal" href="#sec-revocation-credential-pop"><span class="std std-ref">Credential Proof of Possession</span></a> for more details.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a> .</p></td>
</tr>
</tbody>
</table>
<p>The Revocation Endpoint MUST be provided by the Credential Issuer within its Metadata.</p>
</section>
<section id="credential-revocation-http-response">
<h4>Credential Revocation HTTP Response<a class="headerlink" href="#credential-revocation-http-response" title="Link to this heading">¶</a></h4>
<p>In case of succesfully Revocation Request validation, the <em>Credential Issuer</em> MUST return an HTTP response with the status code set to 200. If the <em>Credential Issuer</em> is able to provide a valid Status Assertion for a requested Credential, the response MUST contains a revocation Assertion object within a JSON Array. Otherwise, a Revocation Assertion Errors related to that Credential MUST be included in the Response JSON Array as an entry.</p>
<p>If the Revocation Request fails (e.g. invalid request, server unavailability, etc.), an HTTP Error Status Code MUST be provided within the Revocation Response.</p>
<p>In the following table are listed HTTP Status Codes that MUST be supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>Body</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>200 Created</em></p></td>
<td><p>Revocation Assertion Response</p></td>
<td><p>The Revocation Assertion Response has been successfully created.</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em></p></td>
<td><p>Error code and description</p></td>
<td><p>The Credential Issuer cannot fulfill the request because of invalid parameters.</p></td>
</tr>
<tr class="row-even"><td><p><em>500 Internal Server Error</em></p></td>
<td></td>
<td><p>The Credential Issuer encountered an internal problem. (<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>503 Service Unavailable</em></p></td>
<td></td>
<td><p>The Credential Issuer is temporary unavailable. (<span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
</tbody>
</table>
<p>The response MUST:</p>
<ul class="simple">
<li><p>include a JSON object with a member named <cite>revocation_assertion_responses</cite>;</p></li>
<li><p>be encoded in <code class="docutils literal notranslate"><span class="pre">application/json</span></code> format.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">revocation_assertion_responses</span></code> object MUST contain the following mandatory claims.</p>
<table class="docutils align-default" id="table-http-response-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>revocation_assertion_responses</strong></p></td>
<td><p>the Revocation Assertions and or the Revocation Assertion Errors related to the request made by the Wallet Instance.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
<p>The Revocation Assertion object MUST contain the parameter <code class="docutils literal notranslate"><span class="pre">credential_status_validity</span></code> with the value set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Below a non-normative example of a Revocation Assertion object in JWT format, with the headers and payload represented in JSON and without applying the signature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> {
   &quot;alg&quot;: &quot;ES256&quot;,
   &quot;typ&quot;: &quot;revocation-assertion+jwt&quot;,
   &quot;kid&quot;: &quot;Issuer-JWK-KID&quot;
 }
.
 {
   &quot;iss&quot;: &quot;https://issuer.example.org&quot;,
   &quot;jti&quot;: &quot;6f204f7e-e453-4dfd-814e-9d155319408c&quot;
   &quot;credential_hash&quot;: $CREDENTIAL-HASH,
   &quot;credential_hash_alg&quot;: &quot;sha-256&quot;,
   &quot;credential_status_validity&quot;: false,
   &quot;cnf&quot;: {
     &quot;jwk&quot;: {
       &quot;kty&quot;: &quot;EC&quot;,
       &quot;crv&quot;: &quot;P-256&quot;,
       &quot;x&quot;: &quot;_2ySUmWFjwmraNlo15r6dIBXerVdy_NpJuwAKJMFdoc&quot;,
       &quot;y&quot;: &quot;MV3C88MhhEMba6oyMBWuGeB3dKHP4YADJmGyJwwILsk&quot;
     }
   }
 }
</pre></div>
</div>
<p>The Revocation Assertion Error object MUST contain the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. The error code, as registerd in the table below;</p></li>
<li><p><em>error_description</em>. Text in human-readable form providing further details to clarify the nature of the error encountered.</p></li>
</ul>
</div></blockquote>
<p>Errors are meant to provide additional information about the failure so that the User can be informed and take the appropriate action.
The <cite>error</cite> parameter for the Revocation Assertion Error object MUST be set with one of the values defined in the table below, in addition to the values specified in <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Error Code</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>The request is not valid due to the lack or incorrectness of one or more parameters. (<span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_already_revoked</span></code></p></td>
<td><p>The Digital Credential is already revoked.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">credential_updated</span></code></p></td>
<td><p>One or more information contained in the Digital Credential are changed. The <cite>error_description</cite> field SHOULD contain a human-readable text describing the general parameters updated without specifying each one.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_invalid</span></code></p></td>
<td><p>The Digital Credential is invalid. The <cite>error_description</cite> field SHOULD contain the reason of invalidation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">invalid_request_signature</span></code></p></td>
<td><p>The Revocation Assertion Request signature validation has failed. This error type is used when the proof of possession of the Digital Credential is found not valid within the Revocation Assertion Request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_not_found</span></code></p></td>
<td><p>The <cite>credential_hash</cite> value provided in the Revocation Assertion Request doesn't match with any active Digital Credential.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsupported_hash_alg</span></code></p></td>
<td><p>The hash algorithm set in <cite>credential_hash_alg</cite> is not supported.</p></td>
</tr>
</tbody>
</table>
<p>Below a non-normative example of a Revocation Assertion Error object in JWT format, with the headers and payload represented in JSON and without applying the signature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;ES256&quot;,
  &quot;typ&quot;: &quot;revocation-assertion-error+jwt&quot;,
  &quot;kid&quot;: &quot;Issuer-JWK-KID&quot;
}
.
{
  &quot;iss&quot;: &quot;https://issuer.example.org&quot;,
  &quot;jti&quot;: &quot;6f204f7e-e453-4dfd-814e-9d155319408c&quot;
  &quot;credential_hash&quot;: $CREDENTIAL-HASH,
  &quot;credential_hash_alg&quot;: &quot;sha-256&quot;,
  &quot;error&quot;: &quot;unsupported_hash_alg&quot;,
  &quot;error_description&quot;: &quot;The hash algorithm is not supported&quot;
}
</pre></div>
</div>
</section>
</section>
</section>
<section id="status-assertion-flows">
<h2>Status Assertion Flows<a class="headerlink" href="#status-assertion-flows" title="Link to this heading">¶</a></h2>
<p>The Status Assertion process is divided into the following phases:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The Status Assertion Request by a Wallet Instance: it involves the Wallet Instance and the Credential Issuer.</p></li>
<li><p>The Status Assertion Presentation to a Verifier: it involves the Wallet Instance and the Verifier.</p></li>
</ol>
</div></blockquote>
<figure class="align-center" id="id4" style="width: 100%">
<img alt="_images/High-Level-Flow-Status-Attestation.svg" src="_images/High-Level-Flow-Status-Attestation.svg" />
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text">High-Level Status Assertion Flows</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="status-assertion-request-by-wallet-instance">
<span id="sec-revocation-status-assertion-request"></span><h3>Status Assertion Request by Wallet Instance<a class="headerlink" href="#status-assertion-request-by-wallet-instance" title="Link to this heading">¶</a></h3>
<p>The presentation of a Credential to a Verifier may occur long after it has been issued by the Credential Issuer. During this time interval, the Credential can be invalidated for any reason and therefore the Verifier also needs to verify its revocation or suspension status. To address this scenario, the Credential Issuer provides the Wallet Instance with a <em>Status Assertion</em>. This Assertion is bound to a Credential so that the Wallet Instance can present it to a Verifier, along with the Credential itself, as proof of non-revocation status of the Credential.</p>
<p>The following diagram shows how the Wallet Instance requests a Status Assertion to the Credential Issuer.</p>
<figure class="align-center" id="id5" style="width: 100%">
<span id="fig-low-level-flow-status-assertion"></span><a class="reference external image-reference" href="https://www.plantuml.com/plantuml/svg/NP31Rk9038RlynGMsWD8mDwHTWM22tlOHWML2r8rIHmoQZ9EnnuGRryFeK0vsl_tErzcpcA3nBOnDWhvsEOOJAShLxZEUe71pZOD2gozahx00LY6a_l9h9aZXalqb2oYrEXrXWt5SArRDkRaOF8Nt0oobyqMVkjnYGm1FoEo38k0PQhPvhsZxi-lvMtEAFktsuwC-Uw_sSQLLX3k32W4IXdZIGCwOW0tjZo3ROtGomBbOfrdg0Are9Bmh0fxdzQnIzTBi2B1vL5G_NrvQHpJfvsSeRVN0bKfIFS2nKEj952K2LMJF9LQB6hh7RTZPOSuFKoLJE3bNBRwlu95jcRWCmks8xZ_vRB6uWCg2WyUUz-x9P-RoqCbO0etoKtPXGWcJqU-Vnlb53mf-OhSaMVKGUfh0PxvEVeojiqN"><img alt="_images/Low-Level-Flow-Revocation-Attestation.svg" src="_images/Low-Level-Flow-Revocation-Attestation.svg" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9 </span><span class="caption-text">Status Assertion Request Flow</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Step 1 (Status Assertion Request)</strong>: The Wallet Instance sends the Status Assertion Request to the Credential Issuer, where:</p>
<ul class="simple">
<li><p>The request MUST contain the base64url encoded hash value of the Digital Credential, for which the Status Assertion is requested, and enveloped in a signed Status Assertion Request object.</p></li>
<li><p>The Status Assertion Request object MUST be signed with the private key corresponding to the confirmation claim assigned by the Issuer and contained within the Digital Credential.</p></li>
</ul>
<p>Below a non-normative example representing a Status Assertion Request array with a single Status Assertion Request object in JWT format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">status</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Host</span><span class="p">:</span> <span class="n">issuer</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>

    <span class="p">{</span>
            <span class="s2">&quot;status_assertion_requests&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;${base64url(json({typ: (some pop for status-assertion)+jwt, ...}))}.payload.signature&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">]</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The Status Assertion HTTP request can be sent to a single Credential Issuer regarding multiple Digital Credentials, and MUST contain a JSON object with the member <cite>status_assertion_requests</cite>.
The <cite>status_assertion_requests</cite> MUST be set with an array of strings, where each string within the array represents a Digital Credential Status Assertion Request object.</p>
<p>A non-normative example of Credential Proof of Possession is provided <a class="reference internal" href="#credential-pop-jwt-ex"><span class="std std-ref">in the previous section</span></a>.</p>
<p><strong>Step 2 (PoP verification)</strong>: The Credential Issuer that receives the Status Assertion Request object MUST validate that the Wallet Instance making the request is authorized to request Status Assertions. Therefore the following requirements MUST be satisfied:</p>
<ul class="simple">
<li><p>The Credential Issuer MUST verify the compliance of all elements in the <cite>status_assertion_requests</cite> object using the confirmation method contained within the Digital Credential where the Status Assertion Request object is referred to;</p></li>
<li><p>The Credential Issuer MUST verify that it is the legitimate Issuer of the Digital Credential to which each Status Assertion Request object refers.</p></li>
</ul>
<p><strong>Step 3 (Check for validity)</strong>: The Credential Issuer checks that the User's attributes are not updated by the Authentic Source or that the latter has not revoked them. The technical mechanisms for obtaining this information are out-of-scope of this technical implementation profile.</p>
<p><strong>Step 4 (Status Assertion Creation)</strong>: The Credential Issuer creates the corresponding Status Assertion. When a Status Assertion is requested to a Credential Issuer, the Credential Issuer checks the status of the Digital Credential and creates a Status Assertion bound to it. If the Digital Credential is valid, the Credential Issuer creates a new Status Assertion, which a non-normative example is given below where the format is JWT.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
&quot;alg&quot;: &quot;ES256&quot;,
&quot;typ&quot;: &quot;status-assertion+jwt&quot;,
&quot;kid&quot;: $ISSUER-JWKID
    }
    .
    {
            &quot;iss&quot;: &quot;https://issuer.example.org&quot;,
            &quot;iat&quot;: 1504699136,
            &quot;exp&quot;: 1504785536,
            &quot;credential_hash&quot;: $CREDENTIAL-HASH,
            &quot;credential_hash_alg&quot;: &quot;sha-256&quot;,
            &quot;credential_status_validity&quot;: true,
            &quot;cnf&quot;: {
                    &quot;jwk&quot;: {...}
            }
    }
</pre></div>
</div>
<p><strong>Step 4 (Status Assertion Response)</strong>: The response MUST include a JSON object with a member named <cite>status_assertion_responses</cite>, which contains the Status Assertions and or the Status Assertion Errors related to the request made by the Wallet Instance, as in the following non-normative example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="n">Created</span>
    <span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>

    <span class="p">{</span>
            <span class="s2">&quot;status_assertion_responses&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;${base64url(json({typ: status-assertion+jwt, ...}))}.payload.signature&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">]</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The member <cite>status_assertion_responses</cite> MUST be an array of strings, where each of them represent a Status Assertion Response object as defined in <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p>
<section id="status-assertion-http-request">
<h4>Status Assertion HTTP Request<a class="headerlink" href="#status-assertion-http-request" title="Link to this heading">¶</a></h4>
<p>The requests to the <em>Credential status endpoint</em> of the Credential Issuers MUST be HTTP with method POST, using the same mandatory parameters as in the <a class="reference internal" href="#table-revocation-request-params"><span class="std std-ref">Table of Credential Request parameters</span></a>. These MUST be encoded in <code class="docutils literal notranslate"><span class="pre">application/json</span></code> format.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>status_assertion_requests</strong></p></td>
<td><p>It MUST be an array of strings, where each of them represent a Status Assertion Request object. Each element MUST contain a signed JWT as a cryptographic proof of possession of the Digital Credential. See Section <a class="reference internal" href="#sec-revocation-credential-pop"><span class="std std-ref">Credential Proof of Possession</span></a> for more details.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a> .</p></td>
</tr>
</tbody>
</table>
<p>The <em>typ</em> value in the <em>credential_pop</em> JWT MUST be set to <strong>status-assertion+jwt</strong></p>
<p>The <em>Credential status endpoint</em> MUST be provided by the Credential Issuers within their Metadata. The Credential Issuers MUST include in the issued Digital Credentials the object <em>status_assertion_requests</em> with the JSON member <em>status_assertion</em> set to a JSON Object containing the <em>credential_hash_alg</em> claim. It MUST contain the algorithm used for hashing the Digital Credential. Among the hash algorithms, the value <code class="docutils literal notranslate"><span class="pre">sha-256</span></code> is RECOMMENDED .</p>
</section>
<section id="status-assertion-http-response">
<h4>Status Assertion HTTP Response<a class="headerlink" href="#status-assertion-http-response" title="Link to this heading">¶</a></h4>
<p>In case of succesfully Status Assertion Request validation, the <em>Credential Issuer</em> MUST return an HTTP response with the status code set to 200. If the <em>Credential Issuer</em> is able to provide a valid Status Assertion for a requested Credential, the response MUST contains a Status Assertion object within a JSON Array. Otherwise, a Status Assertion Errors related to that Credential MUST be included in the Response JSON Array as an entry.</p>
<p>If the Status Request fails (e.g. invalid request, server unavailability, etc.), an HTTP Error Status Code MUST be provided within the Status Assertion Response.</p>
<p>In the following table are listed HTTP Status Codes that MUST be supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>Body</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>200 Created</em></p></td>
<td><p>Status Assertion Response</p></td>
<td><p>The Status Assertion Response has been successfully created and it has been returned.</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em></p></td>
<td><p>Error code and description</p></td>
<td><p>The Credential Issuer cannot fulfill the request because of invalid parameters.</p></td>
</tr>
<tr class="row-even"><td><p><em>500 Internal Server Error</em></p></td>
<td></td>
<td><p>The Credential Issuer encountered an internal problem. (<span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>503 Service Unavailable</em></p></td>
<td></td>
<td><p>The Credential Issuer is temporary unavailable. (<span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
</tbody>
</table>
<p>The response MUST:</p>
<ul class="simple">
<li><p>include a JSON object with a member named <cite>status_assertion_responses</cite>;</p></li>
<li><p>be encoded in <code class="docutils literal notranslate"><span class="pre">application/json</span></code> format.</p></li>
</ul>
<p>The status_assertion_responses object MUST contain the following mandatory claims.</p>
<table class="docutils align-default" id="table-http-status-assertion-response-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>status_assertion_responses</strong></p></td>
<td><p>the Status Assertions and or the Status Assertion Errors related to the request made by the Wallet Instance.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
<p>The Status Assertion Error object MUST contain the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. The error code, as registerd in the table below;</p></li>
<li><p><em>error_description</em>. Text in human-readable form providing further details to clarify the nature of the error encountered.</p></li>
</ul>
</div></blockquote>
<p>Errors are meant to provide additional information about the failure so that the User can be informed and take the appropriate action.
The <cite>error</cite> parameter for the Status Assertion Error object MUST be set with one of the values defined in the table below, in addition to the values specified in <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Error Code</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>The request is not valid due to the lack or incorrectness of one or more parameters. (<span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_revoked</span></code></p></td>
<td><p>The Digital Credential is revoked. The reason of revocation MUST be provided in the <em>error_description</em> field.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">credential_updated</span></code></p></td>
<td><p>One or more information contained in the Digital Credential are changed. The <cite>error_description</cite> field SHOULD contain a human-readable text describing the general parameters updated without specifying each one.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_invalid</span></code></p></td>
<td><p>The Digital Credential is invalid. The <cite>error_description</cite> field SHOULD contain the reason of invalidation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">invalid_request_signature</span></code></p></td>
<td><p>The Status Assertion Request signature validation has failed. This error type is used when the proof of possession of the Digital Credential is found not valid within the Status Assertion Request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">credential_not_found</span></code></p></td>
<td><p>The <cite>credential_hash</cite> value provided in the Status Assertion Request doesn't match with any active Digital Credential.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsupported_hash_alg</span></code></p></td>
<td><p>The hash algorithm set in <cite>credential_hash_alg</cite> is not supported.</p></td>
</tr>
</tbody>
</table>
<p>Below a non-normative example of a Status Assertion Error object in JWT format, with the headers and payload represented in JSON and without applying the signature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
  &quot;alg&quot;: &quot;ES256&quot;,
  &quot;typ&quot;: &quot;status-assertion-error+jwt&quot;,
  &quot;kid&quot;: &quot;Issuer-JWK-KID&quot;
}
      .
{
  &quot;iss&quot;: &quot;https://issuer.example.org&quot;,
  &quot;jti&quot;: &quot;6f204f7e-e453-4dfd-814e-9d155319408c&quot;
  &quot;credential_hash&quot;: $CREDENTIAL-HASH,
  &quot;credential_hash_alg&quot;: &quot;sha-256&quot;,
  &quot;error&quot;: &quot;credential_revoked&quot;,
  &quot;error_description&quot;: &quot;Credential is revoked.&quot;
}
</pre></div>
</div>
</section>
</section>
<section id="status-assertion-presentation-to-the-verifiers">
<span id="sec-revocation-nra-presentation"></span><h3>Status Assertion Presentation to the Verifiers<a class="headerlink" href="#status-assertion-presentation-to-the-verifiers" title="Link to this heading">¶</a></h3>
<p>During the presentation phase, a Verifier MAY request the Wallet Instance to provide a Non-Revocation Assertion along with the requested Credential. If a Verifier requests a Status Assertion for a requested Digital Credential, the Wallet Instance MUST provide the Status Assertions in the <em>vp_token</em> JSON array. If the Status Assertion is requested by the Verifier and the Wallet Instance is not able to provide it or it is expired or it is issued far back in time, the Verifier MAY decide to accept or reject the Credential according to its security policy.</p>
<p>Law-Enforcement Authorities or Third Parties authorized by national law, MAY require deferred non-revocation status verification but the definition of these protocols is currently out-of-scope for this technical implementation profile.</p>
</section>
</section>
<section id="credential-proof-of-possession">
<span id="sec-revocation-credential-pop"></span><h2>Credential Proof of Possession<a class="headerlink" href="#credential-proof-of-possession" title="Link to this heading">¶</a></h2>
<p>The Credential Proof of Possession (<strong>credential_pop</strong>) MUST be a JWT that MUST contain the parameters (Header and Payload) in the following table.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>In case of revocation request it MUST be set to <code class="docutils literal notranslate"><span class="pre">revocation-request+jwt</span></code>. In case of Status Assertion request it MUST be set to <code class="docutils literal notranslate"><span class="pre">status-assertion-request+jwt</span></code>, according to <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a> .</p></td>
<td><p><span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>alg</strong></p></td>
<td><p>A digital signature algorithm identifier such as per IANA &quot;JSON Web Signature and Encryption Algorithms&quot; registry. It MUST be one of the supported algorithms listed in the Section <a class="reference external" href="algorithms.html">Cryptographic Algorithms</a> and MUST NOT be set to <code class="docutils literal notranslate"><span class="pre">none</span></code> or any symmetric algorithm (MAC) identifier.</p></td>
<td><p><span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>Unique identifier of the <code class="docutils literal notranslate"><span class="pre">jwk</span></code> or <code class="docutils literal notranslate"><span class="pre">COSE_Key</span></code> inside the <code class="docutils literal notranslate"><span class="pre">cnf</span></code> claim of the Credential to be revoked, as base64url-encoded JWK Thumbprint value, according to <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
<td><p><span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Payload</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>Thumbprint of the JWK in the <code class="docutils literal notranslate"><span class="pre">cnf</span></code> parameter of the Wallet Assertion.</p></td>
<td><p><span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-12"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>It MUST be set to the identifier of the Issuer.</p></td>
<td><p><span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-14"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>UNIX Timestamp with the expiry time of the JWT. It MUST be greater than the value set for <cite>iat</cite>.</p></td>
<td><p><span class="target" id="index-15"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-16"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>UNIX Timestamp with the time of JWT issuance.</p></td>
<td><p><span class="target" id="index-17"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-18"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>Unique identifier for the PoP proof JWT. The value SHOULD be set using a <em>UUID v4</em> value according to [<span class="target" id="index-19"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4122.html"><strong>RFC 4122</strong></a>].</p></td>
<td><p><span class="target" id="index-20"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html#section-4.1.7"><strong>RFC 7519#section-4.1.7</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>credential_hash</strong></p></td>
<td><p>It MUST contain the hash value of a Digital Credential, derived by computing the base64url encoded hash of the Digital Credential.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>credential_hash_alg</strong></p></td>
<td><p>It MUST contain the Algorithm used for hashing the Digital Credential. The value SHOULD be set to <cite>S256</cite>.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="revocation-assertion">
<h2>Revocation Assertion<a class="headerlink" href="#revocation-assertion" title="Link to this heading">¶</a></h2>
<p>When the JWT format is used, the Revocation Assertion MUST contain the following claims.</p>
<table class="docutils align-default" id="table-revocation-assertion-header">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Algorithm used to verify the cryptographic signature of the Revocation Assertion. Revocation Assertion that do not need to be signed SHOULD set the <cite>alg</cite> value to <cite>none</cite> in according with <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
<td><p><a class="reference external" href="https://openid.bitbucket.io/connect/openid-4-verifiable-credential-issuance-1_0.html">[OIDC4VCI. Draft 13]</a>, [<span class="target" id="index-21"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-22"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>It MUST be set to <cite>revocation-assertion-response+jwt</cite> when JWT format is used.</p></td>
<td><p>[<span class="target" id="index-23"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-24"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>], <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="table-revocation-assertion-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Payload</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be set to the identifier of the Credential Issuer.</p></td>
<td><p><span class="target" id="index-25"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-26"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>Unique identifier for the JWT.</p></td>
<td><p><span class="target" id="index-27"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html#section-4.1.7"><strong>RFC 7519#section-4.1.7</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>credential_status_validity</strong></p></td>
<td><p>Boolean value indicating the absolute validity of the Credential linked to the Status Assertion. It MUST be set with the value <cite>false</cite>.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="status-assertion">
<h2>Status Assertion<a class="headerlink" href="#status-assertion" title="Link to this heading">¶</a></h2>
<p>When the JWT format is used, the Status Assertion MUST contain the following claims.</p>
<table class="docutils align-default" id="table-non-revocation-assertion-header">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>A digital signature algorithm identifier such as per IANA &quot;JSON Web Signature and Encryption Algorithms&quot; registry. It MUST be one of the supported algorithms in Section <a class="reference internal" href="algorithms.html#supported-algs"><span class="std std-ref">Cryptographic Algorithms</span></a> and MUST NOT be set to <code class="docutils literal notranslate"><span class="pre">none</span></code> or to a symmetric algorithm (MAC) identifier.</p></td>
<td><p><a class="reference external" href="https://openid.bitbucket.io/connect/openid-4-verifiable-credential-issuance-1_0.html">[OIDC4VCI. Draft 13]</a>, [<span class="target" id="index-28"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-29"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>It MUST be set to <cite>status-assertion-request+jwt</cite> when JWT format is used.</p></td>
<td><p>[<span class="target" id="index-30"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-31"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>], <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-status-attestations/01/">[OAuth Status Attestation draft 01]</a>..</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>Unique identifier of the Credential Issuer <code class="docutils literal notranslate"><span class="pre">jwk</span></code> as base64url-encoded JWK Thumbprint value.</p></td>
<td><p><span class="target" id="index-32"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="table-non-revocation-assertion-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Payload</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be set to the identifier of the Credential Issuer.</p></td>
<td><p><span class="target" id="index-33"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-34"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>UNIX Timestamp with the time of JWT issuance.</p></td>
<td><p><span class="target" id="index-35"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-36"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>UNIX Timestamp with the expiry time of the JWT. It MUST be greater than the value set for <cite>iat</cite>.</p></td>
<td><p><span class="target" id="index-37"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-38"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>credential_hash</strong></p></td>
<td><p>Hash value of the Credential the Status Assertion is bound to.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>credential_hash_alg</strong></p></td>
<td><p>The Algorithm used for hashing the Credential to which the Status Assertion is bound. The value SHOULD be set to <code class="docutils literal notranslate"><span class="pre">S256</span></code>.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>credential_status_validity</strong></p></td>
<td><p>Boolean value indicating the absolute validity of the Credential linked to the Status Assertion. It is REQUIRED and it MUST be set with the value &quot;false&quot; or &quot;true&quot;.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>cnf</strong></p></td>
<td><p>JSON object containing confirmation methods. The sub-member contained within <cite>cnf</cite> member, such as <cite>jwk</cite> for JWT, MUST match with the one provided within the related Digital Credential. Other confirmation methods can be utilized when the referenced Digital Credential supports them, in accordance with the relevant standards.</p></td>
<td><p><a class="reference external" href="https://www.iana.org/go/rfc7800">[RFC7800, Section 3.1]</a> and <a class="reference external" href="https://www.iana.org/go/rfc7800">[RFC8747, Section 3.1]</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-assertion">
<h2>Error Assertion<a class="headerlink" href="#error-assertion" title="Link to this heading">¶</a></h2>
<p>When the JWT format is used, the Revocation or Status Assertion Error MUST contain the following claims.</p>
<table class="docutils align-default" id="table-non-revocation-assertion-error-header">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Algorithm used to verify the cryptographic signature of the Assertion Error. Assertion Error that do not need to be signed SHOULD set the <cite>alg</cite> value to <cite>none</cite> in according with <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
<td><p><a class="reference external" href="https://openid.bitbucket.io/connect/openid-4-verifiable-credential-issuance-1_0.html">[OIDC4VCI. Draft 13]</a>, [<span class="target" id="index-39"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-40"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>It MUST be set to <cite>status-assertion-response+jwt</cite> or <cite>revocation-assertion-response+jwt</cite> when JWT format is used.</p></td>
<td><p>[<span class="target" id="index-41"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-42"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>], <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a> .</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="table-non-revocation-assertion-error-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Payload</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Reference</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>It MUST be set to the identifier of the Credential Issuer.</p></td>
<td><p><span class="target" id="index-43"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> and <span class="target" id="index-44"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>Unique identifier for the JWT.</p></td>
<td><p><span class="target" id="index-45"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html#section-4.1.7"><strong>RFC 7519#section-4.1.7</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>error</strong></p></td>
<td><p>Status code returned from the Credential Issuer after revocation. The value SHOULD be assigned with one of the error types defined in  {{RFC6749}}[Section 5.2]&lt;<a class="reference external" href="https://tools.ietf.org/html/rfc6749#section-5.2">https://tools.ietf.org/html/rfc6749#section-5.2</a>&gt; or defined in <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
<td><p><a class="reference external" href="https://tools.ietf.org/html/rfc6749#section-5.2">[RFC6749, Section 5.2]</a>, <a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>error_description</strong></p></td>
<td><p>Text that clarifies the nature of the error, such as attribute changes, revocation reasons, in relation to the <cite>error</cite> value.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-demarco-oauth-status-assertions/02/">OAUTH-STATUS-ASSERTION</a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Credential Lifecycle</a><ul>
<li><a class="reference internal" href="#operational-requirements">Operational Requirements</a></li>
<li><a class="reference internal" href="#functional-requirements">Functional Requirements</a></li>
<li><a class="reference internal" href="#revocation-use-cases">Revocation Use Cases</a></li>
<li><a class="reference internal" href="#revocation-flows">Revocation Flows</a><ul>
<li><a class="reference internal" href="#revocation-request-by-wallet-instance">Revocation Request by Wallet Instance</a><ul>
<li><a class="reference internal" href="#credential-revocation-http-request">Credential Revocation HTTP Request</a></li>
<li><a class="reference internal" href="#credential-revocation-http-response">Credential Revocation HTTP Response</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#status-assertion-flows">Status Assertion Flows</a><ul>
<li><a class="reference internal" href="#status-assertion-request-by-wallet-instance">Status Assertion Request by Wallet Instance</a><ul>
<li><a class="reference internal" href="#status-assertion-http-request">Status Assertion HTTP Request</a></li>
<li><a class="reference internal" href="#status-assertion-http-response">Status Assertion HTTP Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#status-assertion-presentation-to-the-verifiers">Status Assertion Presentation to the Verifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credential-proof-of-possession">Credential Proof of Possession</a></li>
<li><a class="reference internal" href="#revocation-assertion">Revocation Assertion</a></li>
<li><a class="reference internal" href="#status-assertion">Status Assertion</a></li>
<li><a class="reference internal" href="#error-assertion">Error Assertion</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="relying-party-entity-configuration.html">
                    <span class="icon">&lt;</span><span>Entity Configuration of Relying Parties</span></a>
                
            </div>

            <div class="right">
                
                    <a href="pseudonyms.html"><span>Pseudonyms</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
      Last updated on 17/09/2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.5.
    </div>

<p id="theme_credit"></p>
  </body>
</html>